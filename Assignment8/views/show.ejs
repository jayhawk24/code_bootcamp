<%- include('./header.ejs') %> <%- include('./navbar.ejs') %>
<div class="container mt-5">
    <%- include('./alert') %>

    <div class="card mb-3">
        <img
            src="<%= blog.image %>"
            class="card-img-top"
            alt="..."
            height="600px"
        />
        <div class="card-body">
            <h5 class="card-title"><%= blog.title %></h5>
            <p class="card-text">
                <small class="text-muted"><%= blog.author %></small>
            </p>
            <p class="card-text"><%= blog.desc %></p>
        </div>
        <div class="row">
            <a
                href="/blog/<%= blog.id %>/edit "
                class="btn btn-primary col-3 m-4"
                >Edit</a
            >
            <form method="POST" action="/delete/<%= blog.id %>?_method=delete">
                <button class="btn btn-danger col-3 m-2">Delete</button>
            </form>
        </div>
    </div>
</div>
<div class="container mt-5">
    <h5>Leave a Comment</h5>
    <form
        class="mb-5 row g-3 needs-validation"
        action="/blog/<%= blog.id %>/comment"
        method="POST"
        novalidate
    >
        <div class="mb-3">
            <label for="title" class="form-label">Username</label>
            <input
                type="text"
                name="username"
                placeholder="Title"
                class="form-control"
                id="title"
                required
            />
        </div>
        <div class="mb-3">
            <label for="comment" class="form-label">Comment </label>
            <input
                type="text"
                name="comment"
                placeholder="Comment"
                class="form-control"
                id="comment"
                required
            />
        </div>
        <input
            type="submit"
            value="Submit"
            class="mb-3 btn btn-secondary col-3"
        />
    </form>

    <div class="card mb-5">
        <div class="card-header">Comments</div>

        <div class="card-body">
            <% for(let c of blog.comments){ %>

            <blockquote class="blockquote mb-1">
                <p><%= c.comment %></p>
                <footer class="blockquote-footer">
                    <cite title="Source Title"><%= c.username %></cite>
                </footer>
            </blockquote>

            <% } %>
        </div>
    </div>
</div>
<%- include('./footer.ejs') %>
